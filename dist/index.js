"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var _classCallCheck=_interopDefault(require("@babel/runtime/helpers/classCallCheck.js")),_regeneratorRuntime=_interopDefault(require("@babel/runtime/regenerator/index.js")),request=_interopDefault(require("request")),MAGPIE_API_URL="https://api.magpie.im/v1.1",makeRequest=function(c){return new Promise(function(s,a){var e=c.secret,t=c.method,r=c.path,n=c.data,u={method:t,url:"".concat(MAGPIE_API_URL,"/").concat(r),json:!0,auth:{username:e,password:""}};n&&(u.body=n),request(u,function(e,t,r){e&&a(e),t&&t.statusCode&&400<=t.statusCode&&a(r),s(r)})})},charges={secret:"",create:function(t){return _regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",makeRequest({secret:this.secret,method:"POST",path:"/charges",data:t}));case 1:case"end":return e.stop()}},null,this)}},customers={secret:"",create:function(){return _regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}})}},Magpie=function e(t){if(_classCallCheck(this,e),!t)throw new Error("Private key is required!");charges.secret=t,customers.secret=t,this.charges=charges,this.customers=customers};module.exports=Magpie;
